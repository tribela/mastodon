// MastoXP - Windows XP Luna style UI

html {
  scrollbar-width: auto;
}

// Windows 10 "Activate Windows" watermark (desktop only)
@media screen and (width >= 1175px) {
  body::before {
    content: '정품 인증\A설정으로 이동하여 정품 인증하세요.';
    white-space: pre;
    position: fixed;
    bottom: 16px;
    right: 16px;
    font-family: 'Segoe UI Light', 'Segoe UI', sans-serif;
    font-size: 18px;
    font-weight: 300;
    line-height: 1.5;
    color: rgba(255, 255, 255, 50%);
    text-align: right;
    pointer-events: none;
  }
}

// XP Luna style buttons (rounded, neutral gray)
.button,
.link-button {
  background: linear-gradient(
    180deg,
    #fff 0%,
    #e8e8e8 2%,
    #d4d4d4 98%,
    #c0c0c0 100%
  );
  color: var(--color-xp-text);
  border: 1px solid #808080;
  padding: 4px 14px;
  box-shadow:
    inset 0 1px 0 #fff,
    0 1px 1px rgba(0, 0, 0, 10%);

  &:hover {
    background: linear-gradient(
      180deg,
      #fff 0%,
      #f0f0f0 2%,
      #e0e0e0 98%,
      #d0d0d0 100%
    );
  }

  &:focus {
    outline: 1px dotted #000;
    outline-offset: -4px;
  }

  &:active {
    background: linear-gradient(180deg, #c0c0c0 0%, #d4d4d4 100%);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 20%);
  }

  // Primary/branded buttons - XP blue style
  &.button--primary,
  &.button--block {
    background: linear-gradient(
      180deg,
      #fff 0%,
      #d6e6f9 2%,
      #a5c7f1 50%,
      #7eb4ea 98%,
      #5a9de0 100%
    );
    color: var(--color-xp-text);
    border: 1px solid #3c7fb1;

    &:hover {
      background: linear-gradient(
        180deg,
        #fff 0%,
        #e0eefb 2%,
        #b8d4f5 50%,
        #95c5ef 98%,
        #72b1e7 100%
      );
    }

    &:active {
      background: linear-gradient(180deg, #7eb4ea 0%, #a5c7f1 100%);
    }
  }
}

// XP style input fields
input[type='text'],
input[type='email'],
input[type='password'],
input[type='search'],
input[type='url'],
input[type='number'],
textarea,
select,
.autosuggest-textarea__textarea,
.compose-form .autosuggest-textarea__textarea,
.compose-form__autosuggest-wrapper,
.compose-form textarea {
  background: #fff;
  color: var(--color-xp-text);
  border: 1px solid var(--color-xp-button-shadow);
  border-radius: 2px;
  box-shadow: inset 1px 1px 2px rgba(0, 0, 0, 10%);
}

// XP Luna title bar (blue gradient with rounded top)
.column-header {
  background: linear-gradient(
    180deg,
    var(--color-xp-title-gradient-end) 0%,
    var(--color-xp-title-gradient-start) 10%,
    var(--color-xp-title-blue) 90%,
    var(--color-xp-blue) 100%
  );
  color: var(--color-xp-text-white);
  border: none;
  border-radius: 2px 2px 0 0;
  margin: 0;
  font-weight: bold;
  text-shadow: 1px 1px 1px rgba(0, 0, 0, 30%);
}

// XP Taskbar style header
.drawer__header {
  background: linear-gradient(
    180deg,
    #3168d5 0%,
    #4289ef 3%,
    #2862d3 5%,
    #1c5bce 90%,
    #1941a0 100%
  );
  color: var(--color-xp-text-white);
  border-radius: 0;
  font-weight: bold;
}

.column-header__title {
  color: var(--color-xp-text-white);
}

// Back button and column header buttons
.column-header__back-button,
.column-header__button,
.column-back-button {
  color: var(--color-xp-text-white);

  &:hover {
    color: var(--color-xp-orange);
  }

  .icon {
    color: inherit;
  }
}

// Top navigation header icons
.drawer__header {
  a,
  button {
    color: var(--color-xp-text-white);

    &:hover {
      color: var(--color-xp-orange);
      background: transparent;
    }
  }

  .icon {
    color: var(--color-xp-text-white);
  }

  // XP Start Button - green with gradient
  > a:first-child,
  > button:first-child {
    background: linear-gradient(
      180deg,
      #5ebe5e 0%,
      #3c9a3c 8%,
      #338d33 40%,
      #2d7f2d 88%,
      #267226 92%,
      #236b23 100%
    );
    color: var(--color-xp-text-white);
    border-radius: 0 0 6px 6px;
    padding: 6px 16px;
    margin: 4px;
    margin-top: 0;
    font-weight: bold;
    font-size: 16px;
    font-style: italic;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 60%);
    border: none;
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 40%),
      inset 0 -1px 0 rgba(0, 0, 0, 20%);
    display: flex;
    align-items: center;

    &::after {
      content: 'start';
      color: var(--color-xp-text-white);
      letter-spacing: 0.5px;
    }

    .icon {
      display: none;
    }

    &:hover {
      background: linear-gradient(
        180deg,
        #6fc46f 0%,
        #4ba84b 8%,
        #409940 40%,
        #388d38 88%,
        #318231 92%,
        #2d782d 100%
      );
      color: var(--color-xp-text-white);
    }

    &:active {
      background: linear-gradient(
        180deg,
        #338d33 0%,
        #2d7f2d 50%,
        #267226 100%
      );
    }
  }
}

// Navigation panel
.navigation-panel {
  background: var(--color-xp-window-bg);

  a,
  a:not(.button),
  button {
    color: var(--color-xp-text) !important;
    border-radius: 3px;

    &:hover {
      background: var(--color-xp-light-blue);
      color: var(--color-xp-text-white) !important;

      .icon {
        color: var(--color-xp-text-white) !important;
      }
    }

    .icon {
      color: var(--color-xp-text) !important;
    }
  }

  hr {
    border-color: var(--color-xp-button-shadow);
  }
}

// Select option styling
select option {
  background: var(--color-xp-window-white);
  color: var(--color-xp-text);
}

// Settings page styling
.simple_form {
  label,
  .hint,
  p,
  span {
    color: var(--color-xp-text);
  }

  select {
    background: var(--color-xp-window-white);
    color: var(--color-xp-text);
  }
}

// Columns area spacing
.columns-area {
  padding: 4px;
}

// Specific overrides for XP look
.column {
  background: var(--color-xp-window-bg);
  border-radius: 0;
  overflow: hidden;
  border: none;
  margin: 8px 4px;
  padding: 0;
  padding-inline: 0;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 15%);

  > .scrollable {
    border: 3px solid var(--color-xp-title-blue);
    border-top: none;
    border-radius: 0;
  }

  &:last-child {
    padding-inline-end: 0;
  }
}

.drawer {
  background: var(--color-xp-window-bg);
  border-radius: 0;
  border: none;
  margin: 8px 4px;
  padding: 0;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 15%);

  &:first-child {
    padding-inline-start: 0;
  }
}

.drawer__header {
  border: none;
  border-radius: 0;
  margin: 0;
  margin-bottom: 0;
}

.drawer__pager {
  border: 3px solid var(--color-xp-title-blue);
  border-top: none;
  border-radius: 0;
}

.drawer__inner {
  border: none;
}

// Drawer search box - continuous border
.drawer > .search {
  border-left: 3px solid var(--color-xp-title-blue);
  border-right: 3px solid var(--color-xp-title-blue);
  margin: 0;
  padding: 8px;

  .search__icon-wrapper {
    top: 50%;
    transform: translateY(-50%);
    margin-inline-start: 10px;
  }

  .search__input {
    padding-inline-start: 36px;
  }
}

.column-header {
  border: none;
  border-radius: 0;
  margin: 0;
}

// Single column layout
.columns-area__panels {
  &__pane {
    &__inner {
      background: var(--color-xp-window-bg);
      border: 3px solid var(--color-xp-title-blue);
      border-radius: 5px;
      margin: 8px;
      padding: 8px;
      box-shadow: 2px 2px 4px rgba(0, 0, 0, 15%);
      overflow: hidden;

      // Mobile: reset for sliding navigation panel
      @media screen and (width <= 759px) {
        border: none;
        border-radius: 0;
        margin: 0;
        padding: 0;
        box-shadow: none;
      }
    }
  }

  &__main {
    border: none;
    margin: 8px;
    overflow: hidden;

    .column {
      background: var(--color-xp-window-bg);
      border: none;
      margin: 0;
      padding: 0;
      box-shadow: none;
      border-radius: 0;

      > .scrollable {
        border: none;
      }
    }

    .column-header {
      border: none;
      border-radius: 0;
    }
  }
}

.status,
.detailed-status,
.account,
.notification {
  background: #fff;
  border-radius: 0;
  color: var(--color-xp-text);

  // Ensure all text content is visible
  .display-name,
  .display-name__account,
  .status__display-name,
  .status__relative-time,
  .status__content,
  .status__content__text,
  .notification__message,
  .account__display-name,
  p,
  span {
    color: var(--color-xp-text);
  }

  strong {
    color: var(--color-xp-text);
  }
}

// Status cards
.status {
  border-bottom: 1px solid #c0c0c0;
}

// Notification message text
.notification__message {
  color: var(--color-xp-text);

  span {
    color: var(--color-xp-text);
  }
}

// Display names
.display-name {
  color: var(--color-xp-text);

  &__account {
    color: var(--color-xp-text-gray);
  }
}

// Icons in status/notification areas - force black even in dark theme
.status,
.detailed-status,
.account,
.notification {
  .icon {
    color: #000 !important;
  }

  .icon-button {
    color: #808080 !important;

    .icon {
      color: inherit !important;
    }

    &:hover,
    &.active {
      color: #245edb !important;

      .icon {
        color: inherit !important;
      }
    }
  }
}

// Notification icons
.notification__message {
  .icon {
    color: #000 !important;
  }
}

// Notification group icons
.notification-group--relationships-severance-event,
.notification-group--admin-report,
.notification-group--admin-sign-up {
  .notification-group__icon {
    color: #000 !important;

    .icon {
      color: #000 !important;
    }
  }
}

// Status action bar icons
.status__action-bar {
  .icon-button {
    color: #808080 !important;

    .icon {
      color: inherit !important;
    }

    &:hover,
    &.active {
      color: #245edb !important;
    }
  }
}

// Column content area
.scrollable {
  border-top: 1px solid #808080;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 10%);
}

// Links
a:not(.button) {
  color: var(--color-xp-link);

  &:hover {
    color: var(--color-xp-link-hover);
  }
}

// Mention and hashtag colors
a.mention {
  color: var(--color-xp-light-blue);
}

a.hashtag {
  color: #008000;
}

// Tab bars and navigation - fix contrast
.account__section-headline,
.notification__filter-bar,
.detailed-status__action-bar {
  background: var(--color-xp-button-face);
  border-bottom: 1px solid var(--color-xp-button-shadow);
  border-left: 3px solid var(--color-xp-title-blue);
  border-right: 3px solid var(--color-xp-title-blue);

  a,
  button {
    color: var(--color-xp-text);

    &:hover,
    &.active {
      color: var(--color-xp-light-blue);
      background: var(--color-xp-window-white);
    }
  }
}

// Fix dark backgrounds
.account__header,
.account__header__bar {
  background: var(--color-xp-button-face);
}

.account__header__tabs__name {
  h1,
  small {
    color: var(--color-xp-text);
  }
}

.account__header__bio {
  color: var(--color-xp-text);
}

// Badge styling
.account-role {
  background: var(--color-xp-window-white);
  color: var(--color-xp-light-blue);
  border: 1px solid var(--color-xp-button-shadow);
}

// Account details (joined date, etc.)
.account__header__fields {
  background: var(--color-xp-window-white);
  border: 1px solid var(--color-xp-button-shadow);

  dt {
    color: var(--color-xp-text);
    background: var(--color-xp-button-face);
    border-bottom: 1px solid var(--color-xp-button-shadow);
  }

  dd {
    color: var(--color-xp-text);
    background: var(--color-xp-window-white);
    border-bottom: 1px solid var(--color-xp-button-shadow);
  }
}

// Extra info sections
.account__header__extra__links {
  color: var(--color-xp-text);

  a {
    color: var(--color-xp-text);

    strong {
      color: var(--color-xp-text);
    }
  }
}

// Compose area
.compose-form {
  .compose-form__buttons-wrapper {
    background: var(--color-xp-button-face);
  }
}

// XP style scrollbars
::-webkit-scrollbar {
  width: 17px;
  height: 17px;
}

::-webkit-scrollbar-track {
  background: linear-gradient(90deg, #d4d0c8 0%, #e0ddd5 50%, #d4d0c8 100%);
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(90deg, #fff 0%, #d4d0c8 50%, #a0a0a0 100%);
  border: 1px solid #808080;
  border-radius: 2px;
}

::-webkit-scrollbar-button {
  background: #d4d0c8;
  border: 1px solid #808080;
}

// Modal dialogs - XP style window
.modal-root__modal {
  border-radius: 8px !important;
  overflow: hidden;
  box-shadow: 2px 2px 10px rgba(0, 0, 0, 40%);
  border: 3px solid #0054e3;
}

.confirmation-modal,
.report-modal,
.actions-modal,
.mute-modal,
.block-modal,
.boost-modal,
.embed-modal,
.focal-point-modal {
  background: #ece9d8;
  color: #000;
  border-radius: 0 !important;
  border: none !important;
  overflow: hidden;

  // XP title bar
  &::before {
    content: '';
    display: block;
    height: 28px;
    background: linear-gradient(
      180deg,
      #3a93ff 0%,
      #0058ee 10%,
      #0054e3 90%,
      #0a246a 100%
    );
    margin: -20px -20px 16px;
  }

  h1,
  p,
  span,
  strong {
    color: #000 !important;
  }
}

.confirmation-modal__content,
.report-modal__content {
  padding: 16px 20px;
  color: #000;
  background: #ece9d8;
}

.confirmation-modal__action-bar,
.report-modal__action-bar,
.mute-modal__action-bar,
.block-modal__action-bar {
  background: #ece9d8;
  border-top: none;
  padding: 12px 20px 20px;
  justify-content: flex-end;
  gap: 8px;

  // Style for all buttons and links in action bar
  .button,
  .link-button,
  a,
  button {
    all: unset;
    background: linear-gradient(180deg, #fff 0%, #ece9d8 50%, #d4d0c8 100%);
    color: #000;
    border: 1px solid #808080;
    border-radius: 3px;
    box-shadow:
      inset 1px 1px 0 #fff,
      inset -1px -1px 0 #919b9c;
    padding: 4px 20px;
    min-width: 75px;
    min-height: 23px;
    font-size: 13px;
    font-weight: normal;
    font-family: inherit;
    line-height: 1.5;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-sizing: border-box;
    vertical-align: middle;

    &:hover,
    &:focus {
      background: linear-gradient(180deg, #fff 0%, #f5f4f0 50%, #e8e4dc 100%);
      outline: 1px dotted #000;
      outline-offset: -4px;
    }

    &:active {
      background: linear-gradient(180deg, #d4d0c8 0%, #ece9d8 100%) !important;
      border: 1px solid #808080 !important;
      border-radius: 3px !important;
      box-shadow:
        inset -1px -1px 0 #fff,
        inset 1px 1px 0 #919b9c !important;
    }

    &:focus-visible {
      outline: 1px dotted #000 !important;
      outline-offset: -4px;
    }
  }
}

// ===========================================
// XP Black Edition (Dark Mode) Overrides
// Dark chrome with light window content areas
// ===========================================
@media (prefers-color-scheme: dark) {
  // Dark mode title bars - dark gray gradient
  .column-header {
    background: linear-gradient(
      180deg,
      #5a5a5a 0%,
      #4a4a4a 10%,
      #3a3a3a 50%,
      #2c2c2c 90%,
      #1a1a1a 100%
    );
  }

  .drawer__header {
    background: linear-gradient(180deg, #3a3a3a 0%, #2a2a2a 50%, #1e1e1e 100%);
  }

  // Dark taskbar/drawer borders
  .drawer {
    border: 3px solid #2c2c2c;
  }

  .drawer__pager {
    border-color: #2c2c2c;
  }

  .drawer > .search {
    border-left-color: #2c2c2c;
    border-right-color: #2c2c2c;
  }

  // Column borders - dark gray
  .column > .scrollable {
    border-color: #2c2c2c;
  }

  .column-header {
    border-color: #2c2c2c;
  }

  // Single column layout - dark borders
  .columns-area__panels {
    &__pane__inner {
      border-color: #2c2c2c;
    }
  }

  // Header buttons - white on dark title bar
  .column-header__back-button,
  .column-header__button,
  .column-back-button {
    color: #fff;

    .icon {
      color: #fff;
    }

    &:hover {
      color: #ffa500;

      .icon {
        color: #ffa500;
      }
    }
  }

  .safety-action-modal {
    &__top,
    &__bottom {
      border-radius: 0;
    }

    &__actions .link-button {
      padding: 4px 20px;
      min-height: 23px;
      border: 1px solid #808080;
      border-radius: 3px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      box-sizing: border-box;
    }
  }
}

// Toast notification bar
.notification-bar {
  background: var(--color-xp-toast-bg);
  color: var(--color-xp-toast-text);
  border: 1px solid var(--color-xp-toast-border);
  border-radius: 3px;

  .notification-bar__action {
    color: var(--color-xp-toast-action);
  }
}

// Mobile bottom navigation bar - XP Taskbar style
.ui__navigation-bar {
  background: linear-gradient(
    180deg,
    #3168d5 0%,
    #4289ef 3%,
    #2862d3 5%,
    #1c5bce 90%,
    #1941a0 100%
  );
  border-top: 2px solid #0a246a;
  backdrop-filter: none;

  &__items {
    padding: 0 4px;
  }

  &__item {
    color: #fff;
    text-shadow: 1px 1px 1px rgba(0, 0, 0, 50%);
    padding: 8px 12px;
    border-top: none;
    gap: 4px;
    font-weight: bold;
    font-size: 11px;

    .icon {
      color: #fff;
    }

    &:hover {
      background: rgba(255, 255, 255, 20%);
    }

    &.active {
      background: linear-gradient(
        180deg,
        rgba(255, 255, 255, 30%) 0%,
        rgba(255, 255, 255, 10%) 100%
      );
      color: #fff;
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 30%);

      .icon {
        color: #fff;
      }
    }

    &:focus-visible {
      border-top-color: #fff;
    }
  }

  // XP Black Edition dark mode
  @media (prefers-color-scheme: dark) {
    background: linear-gradient(180deg, #3a3a3a 0%, #2a2a2a 50%, #1e1e1e 100%);
    border-top: 2px solid #0a0a0a;

    &__item {
      &.active {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 15%) 0%,
          rgba(255, 255, 255, 5%) 100%
        );
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 15%);
      }
    }
  }
}
